<br>
<h2>
  <i class="fas fa-money-bill-alt"></i> Fizetés
</h2>
<hr>

<div class="container">
  <div class="row">
      <div class="col-xs-12 col-lg-6">
      <table class="table table-bordered text-center">
        <thead>
          <th>Név</th>
          <th>Ár</th>
          <th>Darabszám</th>
        </thead>
        <tbody>
          <tr *ngFor="let item of cart; let i = index">
            <td>{{item.name}}</td>
            <td>{{item.price | currency: 'Ft '}}</td>
            <td>
              <div class="btn-group">
                <button class="btn btn-light" (click)="removeOne(i)">-</button>
                <input type="text" value="1" class="text-center" min="0" size="1" [(ngModel)]="newOrder.items[i].quantity">
                <button class="btn btn-info" (click)="addOneMore(i)">+</button>
              </div>
            </td>
          </tr>
          <tr>
            <td><strong>Összesen:</strong></td>
            <td>{{newOrder.price}} Ft </td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-xs-12 col-lg-6">
      <form *ngIf="!loggedInUser">
        <div class="form-group">
          <label for="name">Név</label>
          <input type="text" class="form-control" name="username" [(ngModel)]="loggedInUser.user.username" #username="ngModel" required>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="text" class="form-control" name="email" [(ngModel)]="loggedInUser.user.email" #email="ngModel" required>
        </div>
        <div class="form-group">
          <label for="phone">Telefonszám</label>
          <input type="text" class="form-control" name="phoneNumber" [(ngModel)]="loggedInUser.user.phoneNumber" #phoneNumber="ngModel" required>
        </div>
        <div class="form-group">
          <label for="phone">Számlázási cím</label>
          <input type="text" class="form-control" name="billingAddress" [(ngModel)]="loggedInUser.user.billingAddress" #billingAddress="ngModel" required>
        </div>
        <div class="form-group">
          <label for="phone">Szállítási cím</label>
          <input type="text" class="form-control" name="shippingAddress" [(ngModel)]="loggedInUser.user.shippingAddress" #shippingAddress="ngModel" required>
        </div>
        <div class="alert alert-danger" *ngIf="!username.valid || !email.valid || !phoneNumber.valid || !billingAddress.valid || !shippingAddress.valid">A kapcsolati adatok hiányosak, kérjük töltse fel elérhetőségeivel, majd mentse az adatlapot!</div>
        <button class="btn btn-secondary" (click)="editUser()" [disabled]="username.pristine && email.pristine && phoneNumber.pristine && billingAddress.pristine && shippingAddress.pristine"> Adatok mentése</button>
        <a routerLink="../cart"><button class="btn btn-info">Vissza a kosárba</button></a>
        <button class="btn btn-success" (click)="createOrder(cart)" [disabled]="newOrder.price === 0 || !username.valid || !email.valid || !phoneNumber.valid || !billingAddress.valid || !shippingAddress.valid" >Megrendelés</button>
      </form>
    </div>
  </div>
</div>

